 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/frontend/src/services/rutinas.servicio.js b/frontend/src/services/rutinas.servicio.js
index a0d91342218dcb443442ec7e90b301491ea97936..6ae3ff5d9b0c77b34f4ce78fa8f0d12d0911f9ff 100644
--- a/frontend/src/services/rutinas.servicio.js
+++ b/frontend/src/services/rutinas.servicio.js
@@ -62,67 +62,74 @@ async function obtenerDetalleRutina(idPlan, idRutina) {
   return null;
 }
 
 /* ---------- Crear ---------- */
 async function crear(idPlan, payload) {
   // Si el plan es “SIN_PLAN”, vacío o null, usar endpoint general
   if (!idPlan || idPlan === "SIN_PLAN") {
     const r = await axiosInstance.post(`/api/rutinas`, payload);
     return r.data;
   }
 
   // Si hay plan válido, usar el endpoint anidado
   const r = await axiosInstance.post(`/api/planes/${idPlan}/rutinas`, payload);
   return r.data;
 }
 
 /* ---------- Actualizar ---------- */
 async function update(idPlan, idRutina, payload) {
   const body = {
     nombre: payload?.nombre ?? "",
     descripcion: payload?.descripcion ?? "",
     ejercicios: (payload?.ejercicios ?? []).map((e) => ({
       idEjercicio: e.idEjercicio ?? e.id ?? e.id_ejercicio,
       series: Number(e.series ?? 0),
       repeticiones: Number(e.repeticiones ?? 0),
+      grupoMuscular: e.grupoMuscular ?? e.grupo_muscular ?? null,
       observaciones: e.observaciones?.trim() || null
     })),
   };
 
   const r = await axiosInstance.put(`/api/rutinas/${idRutina}`, body, {
     headers: { "Content-Type": "application/json" },
   });
   return r.data ?? true;
 }
 
 /* ---------- Eliminar ---------- */
 async function remove(idPlan, idRutina) {
   const attempts = [
     { method: "delete", url: `/api/planes/${idPlan}/rutinas/${idRutina}` },
     { method: "delete", url: `/api/rutinas/${idRutina}` },
     { method: "post", url: `/api/planes/${idPlan}/rutinas/${idRutina}/delete` },
     { method: "post", url: `/api/rutinas/${idRutina}/delete` },
   ];
 
   for (const att of attempts) {
     try {
       if (att.method === "delete") {
         await axiosInstance.delete(att.url, att.config);
       } else {
         await axiosInstance.post(att.url, att.config?.data ?? {});
       }
       return true;
     } catch {}
   }
   return false;
 }
 
+async function copiarEnPlan(idPlan, rutinaId) {
+  const r = await axiosInstance.post(`/api/planes/${idPlan}/rutinas/copiar`, { rutinaId });
+  return r.data;
+}
+
 /* ---------- Export único ---------- */
 const rutinasService = {
   listByPlan,
   obtenerDetalleRutina,
   crear,
   update,
   remove,
+  copiarEnPlan,
 };
 
 export default rutinasService;
\ No newline at end of file
 
EOF
)